<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Lezione 6: Regressione Polinomiale - Il Diodo</title>
    <style>
        /* --- STILE BASE (Layout Standard) --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        
        /* --- TEMA VIOLA (Specifico Lezione 6) --- */
        .header {
            background: linear-gradient(135deg, #9b59b6, #8e44ad); /* Viola */
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        h1 { margin-bottom: 10px; color: white; font-size: 2.5em; }
        
        .nav {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }
        
        .nav a {
            display: inline-block;
            margin: 0 10px;
            padding: 12px 25px;
            background: #9b59b6; /* Bottone Viola */
            color: white;
            text-decoration: none;
            border-radius: 30px;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .nav a:hover { 
            background: #8e44ad; 
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }
        
        .content {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }
        
        h2 {
            color: #2c3e50;
            border-bottom: 3px solid #9b59b6; /* Sottolineatura Viola */
            padding-bottom: 12px;
            margin-top: 40px;
            margin-bottom: 25px;
        }
        
        h3 {
            color: #8e44ad;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        
        /* BOX */
        .box {
            background: #f4ecf7; /* Sfondo viola chiarissimo */
            padding: 25px;
            margin: 25px 0;
            border-left: 5px solid #9b59b6;
            border-radius: 8px;
        }
        
        .box.warning {
            background: #fff8e1;
            border-left-color: #ffb300;
        }
        
        .box.danger {
            background: #fde8e8;
            border-left-color: #e74c3c;
        }
        
        /* CODICE */
        .code-container {
            position: relative;
            margin: 25px 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .code-header {
            background: #2c3e50;
            color: white;
            padding: 12px 20px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .code {
            background: #263238;
            color: #ecf0f1;
            padding: 20px;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 0.95em;
            overflow-x: auto;
            white-space: pre;
            margin: 0;
            line-height: 1.5;
        }
        
        /* ELEMENTI DIDATTICI */
        .step {
            background: #f4ecf7;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 5px solid #9b59b6;
            display: flex;
            align-items: center;
        }
        
        .step-number {
            background: #9b59b6;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .formula {
            text-align: center;
            font-size: 1.3em;
            margin: 25px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            font-family: 'Cambria', 'Times New Roman', serif;
            border: 2px dashed #9b59b6;
        }

        /* TABELLA */
        .parameter-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .parameter-table th, .parameter-table td {
            border: 1px solid #eee;
            padding: 15px;
            text-align: left;
        }
        
        .parameter-table th {
            background: #9b59b6; /* Intestazione Viola */
            color: white;
        }
        
        .parameter-table tr:nth-child(even) {
            background-color: #fcfcfc;
        }

        /* CONFRONTO */
        .comparison {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin: 30px 0;
            gap: 20px;
        }
        
        .comparison-item {
            background: white;
            padding: 25px;
            border-radius: 10px;
            flex: 1;
            min-width: 250px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            text-align: center;
            border-top: 5px solid #9b59b6;
            transition: transform 0.3s;
        }
        
        .comparison-item:hover {
            transform: translateY(-5px);
        }
        
        .comparison-icon {
            font-size: 3em;
            margin-bottom: 15px;
            display: block;
        }

        /* CONTAINER GRAFICO REALE */
        .graph-container {
            text-align: center;
            margin: 30px 0;
            padding: 25px;
            background: #fff;
            border-radius: 10px;
            border: 2px dashed #9b59b6;
        }
        
        .graph-figure {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            padding: 5px;
            background: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        /* OSCILLAZIONE */
        .oscillation {
            text-align: center;
            margin: 25px 0;
            padding: 25px;
            background: repeating-linear-gradient(
                45deg,
                #fff5f5,
                #fff5f5 10px,
                #ffecec 10px,
                #ffecec 20px
            );
            border-radius: 8px;
            color: #c0392b;
            font-weight: bold;
            border: 1px solid #e74c3c;
        }

        /* QUIZ */
        .quiz-container {
            padding: 30px;
            background: #f4ecf7;
            border: 2px solid #9b59b6;
            border-radius: 10px;
            margin-top: 40px;
        }

        .quiz-button {
            background: #9b59b6;
            color: white;
            padding: 12px 25px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 20px;
            font-weight: bold;
            transition: background 0.3s;
        }
        .quiz-button:hover { background: #8e44ad; }

        .reward {
            margin-top: 25px; 
            padding: 20px; 
            background: #d5f4e6; 
            border-radius: 8px; 
            color: #2c3e50;
            border-left: 5px solid #2ecc71;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #7f8c8d;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üåÄ Lezione 6: Oltre la Linearit√†</h1>
        <p>Modellare il Diodo e la Regressione Polinomiale</p>
        <p><strong>Laboratorio di Sistemi e Automazione</strong></p>
    </div>
    
    <div class="nav">
        <a href="lezione5.html">‚Üê Lezione 5</a>
        <a href="#problema">Il Problema</a>
        <a href="#polinomiale">Regressione Polinomiale</a>
        <a href="#implementazione">Implementazione</a>
        <a href="#oscillazioni">Oscillazioni</a>
        <a href="lezione7.html">Lezione 7 ‚Üí</a>
    </div>
    
    <div class="content">
        <h2 id="problema">üéØ Il Problema: Quando Ohm non basta</h2>
        <p>Fino ad ora abbiamo analizzato resistori, che seguono la Legge di Ohm (V = R ¬∑ I). La relazione √® una <strong>linea retta</strong>.</p>
        
        <div class="box warning">
            <h3>‚ö†Ô∏è Ma in elettronica, i componenti pi√π interessanti sono <strong>Non-Lineari</strong>.</h3>
            <p>Oggi analizzeremo un <strong>DIODO</strong>. La sua corrente non cresce in modo proporzionale alla tensione, ma segue una curva esponenziale.</p>
        </div>
        
        <h3>üî¨ Equazione di Shockley del Diodo:</h3>
        <div class="formula">
            I = I‚Çõ ¬∑ (e^(V/(n¬∑V‚Çú)) - 1)
        </div>
        
        <table class="parameter-table">
            <tr>
                <th>Parametro</th>
                <th>Significato</th>
                <th>Valore Tipico</th>
            </tr>
            <tr>
                <td><strong>I‚Çõ</strong></td>
                <td>Corrente di saturazione inversa</td>
                <td>1 pA (piccolissima)</td>
            </tr>
            <tr>
                <td><strong>V‚Çú</strong></td>
                <td>Tensione termica</td>
                <td>‚âà 26mV a 300K</td>
            </tr>
            <tr>
                <td><strong>n</strong></td>
                <td>Fattore di idealit√†</td>
                <td>1 (diodo ideale)</td>
            </tr>
        </table>
        
        <div class="box danger">
            <h3>‚ùå Errore Concettuale</h3>
            <p>Se provassimo a usare <code>LinearRegression</code> (una retta) su un diodo, otterremmo un modello pessimo che prevede corrente anche quando il diodo √® spento! La retta √® troppo rigida per seguire la curva esponenziale.</p>
        </div>
        
        <h2 id="polinomiale">üîß La Soluzione: Regressione Polinomiale</h2>
        <p>Come facciamo a insegnare alla macchina a 'curvare'?</p>
        
        <div class="box">
            <h3>üéØ Il trucco matematico: <strong>Polynomial Features</strong></h3>
            <p>Invece di dare alla macchina solo la tensione <em>V</em>, le diamo anche le sue potenze:</p>
            <div class="formula" style="margin: 10px 0; padding: 10px;">
                Input = [V, V¬≤, V¬≥, ...]
            </div>
            <p>√à come dire alla macchina: "Non cercare solo una retta, cerca una curva che combina parabole (x¬≤) e cubiche (x¬≥)".</p>
        </div>
        
        <div class="comparison">
            <div class="comparison-item">
                <span class="comparison-icon">üìà</span>
                <h3>Regressione Lineare</h3>
                <p><strong>Equazione:</strong> y = a + bx</p>
                <p><strong>Applicazione:</strong> Resistori lineari</p>
                <p><strong>Limite:</strong> Solo rette</p>
            </div>
            
            <div class="comparison-item">
                <span class="comparison-icon">üåÄ</span>
                <h3>Regressione Polinomiale</h3>
                <p><strong>Equazione:</strong> y = a + bx + cx¬≤ + dx¬≥</p>
                <p><strong>Applicazione:</strong> Diodi, transistor</p>
                <p><strong>Vantaggio:</strong> Curve complesse</p>
            </div>
        </div>
        
        <h2 id="implementazione">üíª Implementazione in Python</h2>
        
        <div class="step">
            <div class="step-number">1</div>
            <div>
                <h3>Generazione Dati (Simulazione Diodo)</h3>
                <p>Creiamo i dati sintetici che simulano il comportamento reale di un diodo.</p>
            </div>
        </div>
        
        <div class="code-container">
            <div class="code-header">Python: Generazione Dati</div>
            <div class="code">
import numpy as np
import matplotlib.pyplot as plt

# Dati di Tensione (Input) da 0V a 0.8V
V = np.linspace(0, 0.8, 20).reshape(-1, 1)

# Parametri fisici del diodo
Is = 1e-12  # 1 picoampere
Vt = 0.026  # 26 millivolt
n = 1       # Fattore di idealit√†

# Equazione di Shockley (Output Corrente)
I = Is * (np.exp(V / (n * Vt)) - 1)

# Aggiungiamo rumore casuale (simuliamo errori di misura reali)
I_noise = I + np.random.normal(0, 0.0005, size=I.shape)

print("Dati diodo simulati con successo!")</div>
        </div>
        
        <div class="step">
            <div class="step-number">2</div>
            <div>
                <h3>La Magia: Pipeline Polinomiale</h3>
                <p>Creiamo una pipeline che trasforma i dati in polinomi e poi applica la regressione.</p>
            </div>
        </div>
        
        <div class="code-container">
            <div class="code-header">Python: Addestramento Modello</div>
            <div class="code">
from sklearn.preprocessing import PolynomialFeatures
from sklearn.linear_model import LinearRegression
from sklearn.pipeline import make_pipeline

# Creiamo un modello "Intelligente" che:
# 1. Eleva i dati alla potenza (grado 5)
# 2. Applica la regressione lineare su quei dati "potenziati"
grado = 5
modello_diodo = make_pipeline(PolynomialFeatures(grado), LinearRegression())

# Addestriamo il modello sui dati rumorosi
modello_diodo.fit(V, I_noise)

# Facciamo una predizione (disegniamo la curva appresa)
I_predetto = modello_diodo.predict(V)

print(f"Modello polinomiale di grado {grado} creato e addestrato!")</div>
        </div>
        
        <div class="step">
            <div class="step-number">3</div>
            <div>
                <h3>Visualizzazione: Retta vs Curva</h3>
                <p>Ora visualizziamo il risultato e salviamo il grafico.</p>
            </div>
        </div>
        
        <div class="code-container">
            <div class="code-header">Python: Visualizzazione e Salvataggio</div>
            <div class="code">
plt.figure(figsize=(10, 6))

# Disegniamo i punti sperimentali (scatter)
plt.scatter(V, I_noise, color='black', label='Dati Lab (Rumorosi)')

# Disegniamo la curva appresa dal modello (plot)
plt.plot(V, I_predetto, color='red', linewidth=2, label=f'Modello Polinomiale (Grado {grado})')

plt.title("Caratteristica I-V del Diodo")
plt.xlabel("Tensione V [Volt]")
plt.ylabel("Corrente I [Ampere]")
plt.legend()
plt.grid(True, linestyle='--', alpha=0.7)

# --- SALVATAGGIO FONDAMENTALE ---
plt.savefig('grafico_diodo.png')
plt.show()</div>
        </div>

        <div class="graph-container">
            <h3>Risultato: Grafico Diodo</h3>
            <p>Ecco il grafico generato dal codice Python:</p>
            <img src="grafico_diodo.png?v=final" alt="Grafico Diodo Polinomiale" class="graph-figure" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
            <div style="display:none; padding: 40px; background: #eee; color: #777; border: 1px dashed #ccc;">
                [Immagine "grafico_diodo.png" non trovata. Esegui il codice Python sopra per generarla.]
            </div>
        </div>
        
        <h2 id="oscillazioni">‚ö†Ô∏è Analisi Critica: Le "Oscillazioni Fantasma"</h2>
        
        <div class="oscillation">
            <div style="font-size: 2em;">üåä</div>
            <p>Osserva attentamente la linea rossa nel grafico generato tra 0V e 0.6V (zona sinistra).</p>
        </div>
        
        <div class="box danger">
            <h3>üîç Cosa notiamo di strano?</h3>
            <ul>
                <li>La linea <strong>non √® piatta a zero</strong> come dovrebbe essere fisicamente.</li>
                <li>Fa delle <strong>piccole onde (oscillazioni)</strong> prima di salire.</li>
                <li>A volte scende addirittura <strong>sotto lo zero</strong> (Corrente negativa?! Impossibile in questo circuito passivo).</li>
            </ul>
        </div>
        
        <div class="box">
            <h3>üéØ Perch√© succede?</h3>
            <p>In Elettronica sappiamo che sotto la soglia (0.6V) la corrente √® zero. <strong>Ma la macchina non sa cos'√® un diodo o la fisica.</strong></p>
            <p>L'algoritmo sta solo cercando di piegare un polinomio matematico per unire i punti. Per riuscire a salire velocemente dopo 0.6V, il polinomio deve "prendere la rincorsa" prima, creando oscillazioni innaturali (Fenomeno di Runge).</p>
        </div>
        
        <h2>üß† Conclusione: Il Ruolo dell'Ingegnere</h2>
        <div class="box warning">
            <h3 style="text-align: center;">La Matematica non conosce la Fisica</h3>
            <p>L'algoritmo propone valori matematicamente corretti (minimizzano l'errore quadratico) ma fisicamente assurdi (corrente negativa). Un Data Scientist puro potrebbe accettarli, ma un <strong>Elettronico deve intervenire</strong> usando modelli che rispettano i vincoli fisici (come vedremo nella prossima lezione).</p>
        </div>

        <hr style="border: 0; border-top: 1px solid #ddd; margin: 40px 0;">

        <h2>üìù Verifica Concetti Chiave</h2>
        <div class="quiz-container">
            <p style="font-weight:bold; margin-bottom:10px;">1. Perch√© la Regressione Lineare semplice fallisce con un Diodo?</p>
            <select id="q6" style="width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 5px; font-size:1em;">
                <option value="0">Scegli la risposta...</option>
                <option value="sbagliata">Perch√© il diodo √® rotto.</option>
                <option value="corretta">Perch√© la relazione V-I del diodo √® esponenziale (non-lineare).</option>
                <option value="sbagliata">Perch√© abbiamo usato troppi dati.</option>
            </select>
            
            <button id="check-l6" class="quiz-button" onclick="checkL6Quiz()">Verifica Risposta</button>

            <div id="reward-l6" class="reward" style="display: none;">
                <h4 style="margin-top:0; color:#27ae60;">‚úÖ Risposta Esatta!</h4>
                <p>Esatto! Serve una curva, non una retta. Ma attenzione alle oscillazioni!</p>
                <p>Nella prossima lezione vedremo come risolvere questo problema unendo Fisica e AI.</p>
                <a href="lezione7.html" style="display:inline-block; margin-top:10px; padding:10px 20px; background:#27ae60; color:white; text-decoration:none; border-radius:20px; font-weight:bold;">‚û°Ô∏è Vai alla Lezione 7</a>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <p>Laboratorio di Sistemi e Automazione - ML per Elettronica</p>
        <p>Lezione 6: Regressione Polinomiale e Diodo | ¬© 2023</p>
    </div>

    <script>
        function checkL6Quiz() {
            const q6 = document.getElementById('q6').value;
            const reward = document.getElementById('reward-l6');
            const button = document.getElementById('check-l6');
            
            if (q6 === 'corretta') {
                reward.style.display = 'block';
                button.style.display = 'none'; // Nasconde il bottone dopo aver indovinato
            } else if (q6 === 'sbagliata') {
                alert("Riprova: pensa alla forma della curva del diodo rispetto a una retta.");
            } else {
                alert("Per favore seleziona una risposta.");
            }
        }
    </script>
</body>
</html>

