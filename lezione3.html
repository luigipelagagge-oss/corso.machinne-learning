<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Lezione 3: Visualizzazione Dati - Grafici V-I</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
            color: #333;
        }
        
        .header {
            background: linear-gradient(135deg, #3498db, #2c3e50);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        h1 {
            margin-bottom: 15px;
            color: white;
            font-size: 2.5em;
        }
        
        .subtitle {
            font-size: 1.2em;
            margin-bottom: 10px;
            opacity: 0.9;
        }
        
        .nav {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }
        
        .nav a {
            display: inline-block;
            margin: 0 10px;
            padding: 12px 25px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 30px;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .nav a:hover {
            background: #2980b9;
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }
        
        .content {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }
        
        h2 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 12px;
            margin-top: 40px;
            margin-bottom: 25px;
        }
        
        h3 {
            color: #3498db;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        
        .box {
            background: #f8f9fa;
            padding: 25px;
            margin: 25px 0;
            border-left: 5px solid #3498db;
            border-radius: 8px;
        }
        
        .box.warning {
            background: #fff8e1;
            border-left-color: #ffb300;
        }
        
        .box.success {
            background: #e8f5e9;
            border-left-color: #4caf50;
        }
        
        .code-container {
            position: relative;
            margin: 25px 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .code-header {
            background: #2c3e50;
            color: white;
            padding: 12px 20px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .code {
            background: #263238;
            color: #e0f2f1;
            padding: 20px;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 0.95em;
            overflow-x: auto;
            white-space: pre;
            margin: 0;
            line-height: 1.5;
            tab-size: 4;
        }
        
        .step {
            background: #e8f4fc;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 5px solid #3498db;
            display: flex;
            align-items: flex-start;
        }
        
        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: #3498db;
            color: white;
            width: 36px;
            height: 36px;
            text-align: center;
            line-height: 36px;
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .graph-container {
            text-align: center;
            margin: 30px 0;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px dashed #3498db;
        }

        .graph-figure {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            padding: 8px;
            background: white;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
        
        .note {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #ffc107;
            display: flex;
            align-items: flex-start;
        }
        
        .note-icon {
            margin-right: 10px;
            font-size: 1.2em;
        }
        
        .quiz-container {
            padding: 30px;
            background: #f0f8ff;
            border: 2px solid #3498db;
            border-radius: 10px;
            margin-top: 40px;
        }
        
        .quiz-question-block {
            margin-bottom: 30px;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 20px;
        }
        
        .quiz-question-block:last-child {
            border-bottom: none;
        }
        
        .quiz-question {
            margin-bottom: 15px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .quiz-option {
            margin: 8px 0;
            padding: 12px 15px;
            background: white;
            border-radius: 6px;
            border: 1px solid #ddd;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        
        .quiz-option:hover {
            background: #f5fafd;
            border-color: #3498db;
        }
        
        .quiz-option.selected {
            background: #e8f4fc;
            border-color: #3498db;
            font-weight: bold;
            box-shadow: 0 0 0 1px #3498db;
        }
        
        .quiz-button {
            background: #3498db;
            color: white;
            padding: 15px 40px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 10px;
            font-weight: bold;
            font-size: 1.1em;
            transition: background 0.3s;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        
        .quiz-button:hover {
            background: #2980b9;
        }

        .next-lesson-btn {
            background: #27ae60;
            color: white;
            padding: 15px 30px;
            border: none;
            cursor: pointer;
            border-radius: 50px;
            margin-top: 20px;
            font-weight: bold;
            text-decoration: none;
            display: inline-block;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        
        .next-lesson-btn:hover {
            background: #219150;
            transform: translateY(-3px);
            box-shadow: 0 6px 10px rgba(0,0,0,0.15);
        }
        
        .reward {
            margin-top: 30px;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .footer {
            text-align: center;
            margin-top: 50px;
            color: #7f8c8d;
            font-size: 0.9em;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .objective-list {
            list-style-type: none;
            padding-left: 0;
        }
        
        .objective-list li {
            padding: 10px 0 10px 40px;
            position: relative;
            margin-bottom: 10px;
        }
        
        .objective-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            top: 10px;
            width: 25px;
            height: 25px;
            background: #3498db;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 25px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üé® Lezione 3: Visualizzazione Dati</h1>
        <p class="subtitle">Creazione della Caratteristica V-I e Salvataggio File</p>
        <p><strong>Laboratorio di Sistemi e Automazione</strong></p>
    </div>

    <div class="nav">
        <a href="#introduzione">Introduzione</a>
        <a href="#setup">Setup</a>
        <a href="#primo-grafico">Primo Grafico</a>
        <a href="#modello">Modello di Regressione</a>
        <a href="#grafico-completo">Grafico Completo</a>
        <a href="#salvataggio">Salvataggio</a>
        <a href="#quiz">Quiz</a>
    </div>

    <div class="content">
        <h2 id="introduzione">Introduzione alla Visualizzazione Dati</h2>
        <p>Nella lezione precedente abbiamo imparato a raccogliere dati sperimentali e ad applicare un modello di regressione lineare. In questa lezione, impareremo a visualizzare questi dati in modo efficace tramite grafici, un passaggio fondamentale per l'analisi e la comunicazione dei risultati scientifici.</p>
        
        <div class="box">
            <h3>Obiettivi della Lezione</h3>
            <ul class="objective-list">
                <li>Importare e utilizzare le librerie di visualizzazione dati</li>
                <li>Creare grafici scatter plot per i dati sperimentali</li>
                <li>Aggiungere rette di regressione ai grafici</li>
                <li>Personalizzare l'aspetto dei grafici (titoli, etichette, legenda)</li>
                <li>Salvare i grafici in file immagine per la documentazione</li>
            </ul>
        </div>
        
        <h2 id="setup">1. Setup Iniziale</h2>
        <p>Per iniziare, dobbiamo importare tutte le librerie necessarie e preparare i dati che utilizzeremo durante la lezione.</p>
        
        <div class="step">
            <div class="step-number">1</div>
            <div>
                <h3>Importazione Librerie</h3>
                <p>Importiamo le librerie fondamentali per il calcolo numerico e la visualizzazione:</p>
            </div>
        </div>
        
        <div class="code-container">
            <div class="code-header">
                <span>Python: Importazione Librerie</span>
                <span style="font-size:0.8em; opacity:0.8;">Fondamentale per tutti i grafici</span>
            </div>
            <pre class="code"># 1. Importiamo TUTTE le librerie necessarie
import matplotlib.pyplot as plt  # Libreria fondamentale per i grafici
import numpy as np  # Per i calcoli numerici e gli array
from sklearn.linear_model import LinearRegression  # Per il modello di regressione</pre>
        </div>
        
        <div class="step">
            <div class="step-number">2</div>
            <div>
                <h3>Preparazione Dati</h3>
                <p>Ricreiamo i dati della Lezione 2 (misure di laboratorio):</p>
            </div>
        </div>
        
        <div class="code-container">
            <div class="code-header">
                <span>Python: Dati Sperimentali</span>
                <span style="font-size:0.8em; opacity:0.8;">Dati della Lezione 2</span>
            </div>
            <pre class="code"># 2. Ricreiamo i dati della Lezione 2 (Misure Lab)
# Input (Corrente I)
X_corrente = np.array([[1.0], [2.0], [3.0], [4.0], [5.0]])

# Output (Tensione V misurata)
y_tensione = np.array([1.1, 1.9, 3.2, 3.8, 5.1])

# 3. Ricalcoliamo il modello (Fit)
modello = LinearRegression()
modello.fit(X_corrente, y_tensione)

print("Setup completato: Librerie caricate e Modello pronto.")
print(f"Coefficiente angolare (m): {modello.coef_[0]:.3f}")
print(f"Intercetta (q): {modello.intercept_:.3f}")</pre>
        </div>
        
        <div class="note">
            <div class="note-icon">üí°</div>
            <div>I dati rappresentano misure di tensione (V) in funzione della corrente (I) per un componente elettrico. La regressione lineare ci fornisce la caratteristica V-I del componente.</div>
        </div>
        
        <h2 id="primo-grafico">2. Primo Grafico: Punti Sperimentali</h2>
        <p>Iniziamo con il grafico pi√π semplice: la visualizzazione dei punti sperimentali.</p>
        
        <div class="code-container">
            <div class="code-header">
                <span>Python: Primo Grafico</span>
                <span style="font-size:0.8em; opacity:0.8;">Visualizzazione punti sperimentali</span>
            </div>
            <pre class="code"># Creiamo una figura di dimensioni 8x5 pollici
plt.figure(figsize=(8, 5))

# Disegniamo i punti (Misure): colore blu
plt.scatter(X_corrente, y_tensione, color='blue', label='Misure Lab')

# Aggiungiamo la legenda per capire cos'√® il punto blu
plt.legend()

# Mostriamo il grafico a schermo
plt.show()</pre>
        </div>
        
        <div class="graph-container">
            <h3>Risultato Atteso</h3>
            <p>Il grafico mostrer√† 5 punti blu corrispondenti alle nostre misure sperimentali:</p>
            <img src="grafico_misure.png" alt="Grafico punti sperimentali" class="graph-figure" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
            <div style="display:none; width: 100%; height: 250px; background-color: #f1f1f1; align-items: center; justify-content: center; color: #888; border: 1px dashed #ccc; padding-top: 100px;">
                [Immagine "grafico_misure.png" non trovata]
            </div>
            <p style="font-size:0.9em; color:#666; margin-top:10px;">Esempio di come apparir√† il primo grafico con i punti sperimentali</p>
        </div>
        
        <div class="box warning">
            <h3>Attenzione!</h3>
            <p>La funzione <code>plt.scatter()</code> √® specifica per disegnare punti, mentre <code>plt.plot()</code> √® pi√π adatta per linee continue. Usare la funzione appropriata √® importante per una corretta visualizzazione.</p>
        </div>
        
        <h2 id="modello">3. Aggiunta del Modello di Regressione</h2>
        <p>Ora aggiungiamo al grafico la retta di regressione che rappresenta il modello calcolato.</p>
        
        <div class="code-container">
            <div class="code-header">
                <span>Python: Aggiunta Retta di Regressione</span>
                <span style="font-size:0.8em; opacity:0.8;">Combinazione punti + linea</span>
            </div>
<pre class="code"># 1. Calcoliamo i valori teorici ideali (sulla retta) usando il modello addestrato
y_predetti = modello.predict(X_corrente)

plt.figure(figsize=(8, 5))

# 2. Rimettiamo i punti blu (Scatter)
plt.scatter(X_corrente, y_tensione, color='blue', label='Misure Lab')

# 3. Aggiungiamo la LINEA rossa (Plot)
# 'r-' significa: colore rosso (r), linea continua (-)
# linewidth=2 rende la linea pi√π spessa per visibilit√†
plt.plot(X_corrente, y_predetti, 'r-', linewidth=2, label='Modello Calcolato')

# Mostriamo la legenda e il grafico
plt.legend()
plt.show()</pre>
        </div>
        
        <div class="graph-container">
            <h3>Risultato Atteso</h3>
            <p>Il grafico ora mostrer√† sia i punti sperimentali che la retta di regressione:</p>
            <img src="grafico_VI.png" alt="Grafico con retta di regressione" class="graph-figure" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
             <div style="display:none; width: 100%; height: 250px; background-color: #f1f1f1; align-items: center; justify-content: center; color: #888; border: 1px dashed #ccc; padding-top: 100px;">
                [Immagine "grafico_VI.png" non trovata]
            </div>
        </div>
        
        <h2 id="grafico-completo">4. Grafico Completo e Professionale</h2>
        <p>Miglioriamo l'aspetto del grafico aggiungendo titoli, etichette, griglia e altri elementi di stile.</p>
        
        <div class="code-container">
            <div class="code-header">
                <span>Python: Grafico Professionale Completo</span>
                <span style="font-size:0.8em; opacity:0.8;">Tutti gli elementi di un grafico scientifico</span>
            </div>
<pre class="code">plt.figure(figsize=(10, 6))  # Creiamo un foglio pi√π grande per maggiore chiarezza

# -- DISEGNO DEI DATI --
# Punti sperimentali: blu, dimensione (s) aumentata a 80
plt.scatter(X_corrente, y_tensione, color='blue', s=80, label='Misure Sperimentali')

# Retta di regressione: rossa, spessore 3
plt.plot(X_corrente, y_predetti, color='red', linewidth=3, label='Caratteristica V-I (Regressione)')

# -- ESTETICA (Labelling) --
plt.title("Caratteristica V-I Componente Ohmico", fontsize=14)  # Titolo
plt.xlabel("Corrente I [mA]", fontsize=12)  # Etichetta asse X con unit√†
plt.ylabel("Tensione V [Volt]", fontsize=12)  # Etichetta asse Y con unit√†

# -- DETTAGLI AGGIUNTIVI --
plt.grid(True, linestyle='--', alpha=0.7)  # Griglia tratteggiata per facilitare la lettura
plt.legend(fontsize=12)  # Mostra la legenda

# -- OUTPUT --
plt.show()</pre>
        </div>
        
        <div class="graph-container">
            <h3>Risultato Finale</h3>
            <p>Ecco come apparir√† il grafico professionale completo:</p>
            <img src="grafico_VI.png" alt="Grafico completo professionale" class="graph-figure" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
            <div style="display:none; width: 100%; height: 250px; background-color: #f1f1f1; align-items: center; justify-content: center; color: #888; border: 1px dashed #ccc; padding-top: 100px;">
                [Immagine "grafico_VI.png" non trovata]
            </div>
            <p style="font-size:0.9em; color:#666; margin-top:10px;">Grafico completo con tutti gli elementi: titolo, etichette, griglia, legenda</p>
        </div>
        
        <div class="box success">
            <h3>Elementi di un Grafico Scientifico</h3>
            <ul>
                <li><strong>Titolo</strong>: Descrive chiaramente il contenuto del grafico</li>
                <li><strong>Etichette assi</strong>: Indicano le variabili con le relative unit√† di misura</li>
                <li><strong>Legenda</strong>: Spiega i simboli e le linee utilizzati</li>
                <li><strong>Griglia</strong>: Facilita la lettura dei valori</li>
                <li><strong>Dati</strong>: Rappresentati in modo chiaro e non ambiguo</li>
            </ul>
        </div>
        
        <h2 id="salvataggio">5. Salvataggio del Grafico</h2>
        <p>Per documentazione e relazioni, √® fondamentale saper salvare i grafici in file immagine.</p>
        
        <div class="code-container">
            <div class="code-header">
                <span>Python: Salvataggio Grafico su File</span>
                <span style="font-size:0.8em; opacity:0.8;">Esportazione per relazioni e documentazione</span>
            </div>
<pre class="code"># Rieseguiamo il codice del grafico completo (SENZA plt.show alla fine)
plt.figure(figsize=(10, 6))
plt.scatter(X_corrente, y_tensione, color='blue', s=80, label='Misure Sperimentali')
plt.plot(X_corrente, y_predetti, color='red', linewidth=3, label='Caratteristica V-I')
plt.title("Caratteristica V-I Componente Ohmico")
plt.xlabel("Corrente I [mA]")
plt.ylabel("Tensione V [Volt]")
plt.grid(True, linestyle='--')
plt.legend()

# --- COMANDO DI SALVATAGGIO ---
# Salva la figura corrente in un file chiamato "grafico_VI.png"
plt.savefig("grafico_VI.png", dpi=300)

print("Immagine salvata! Controlla la cartella Files di Colab per scaricarla.")</pre>
        </div>
        
        <div class="step">
            <div class="step-number">!</div>
            <div>
                <h3>Importante</h3>
                <p>Il comando <code>plt.savefig()</code> deve essere chiamato <strong>prima</strong> di <code>plt.show()</code>. In alternativa, si pu√≤ omettere <code>plt.show()</code> quando si salva il grafico.</p>
            </div>
        </div>
        
        <div class="note">
            <div class="note-icon">üìÅ</div>
            <div>
                <p><strong>Formati di salvataggio supportati:</strong></p>
                <ul>
                    <li><strong>PNG</strong>: Per grafici da inserire in presentazioni e documenti</li>
                    <li><strong>PDF</strong>: Per stampa di alta qualit√† e documenti vettoriali</li>
                    <li><strong>SVG</strong>: Grafica vettoriale scalabile</li>
                </ul>
            </div>
        </div>
        
        <h2 id="quiz">Verifica delle Conoscenze</h2>
        <p>Mettiti alla prova con questo breve quiz. Seleziona tutte le risposte corrette e premi "Verifica Risposte".</p>
        
        <div class="quiz-container">
            <div class="quiz-question-block" id="q1">
                <div class="quiz-question">1. Quale libreria Python utilizziamo principalmente per creare grafici?</div>
                <div class="quiz-option" onclick="selectOption(this, 1)">Matplotlib</div>
                <div class="quiz-option" onclick="selectOption(this, 1)">NumPy</div>
                <div class="quiz-option" onclick="selectOption(this, 1)">Pandas</div>
                <div class="quiz-option" onclick="selectOption(this, 1)">SciPy</div>
            </div>
            
            <div class="quiz-question-block" id="q2">
                <div class="quiz-question">2. Quale funzione si usa per disegnare punti isolati su un grafico?</div>
                <div class="quiz-option" onclick="selectOption(this, 2)">plt.scatter()</div>
                <div class="quiz-option" onclick="selectOption(this, 2)">plt.plot()</div>
                <div class="quiz-option" onclick="selectOption(this, 2)">plt.point()</div>
                <div class="quiz-option" onclick="selectOption(this, 2)">plt.dot()</div>
            </div>
            
            <div class="quiz-question-block" id="q3">
                <div class="quiz-question">3. Cosa rappresenta la retta rossa nel nostro grafico V-I?</div>
                <div class="quiz-option" onclick="selectOption(this, 3)">Il modello di regressione lineare</div>
                <div class="quiz-option" onclick="selectOption(this, 3)">I dati sperimentali</div>
                <div class="quiz-option" onclick="selectOption(this, 3)">La media dei punti</div>
                <div class="quiz-option" onclick="selectOption(this, 3)">L'errore di misura</div>
            </div>
            
            <div class="quiz-question-block" id="q4">
                <div class="quiz-question">4. Quale comando si usa per salvare un grafico in un file PNG?</div>
                <div class="quiz-option" onclick="selectOption(this, 4)">plt.savefig()</div>
                <div class="quiz-option" onclick="selectOption(this, 4)">plt.export()</div>
                <div class="quiz-option" onclick="selectOption(this, 4)">plt.download()</div>
                <div class="quiz-option" onclick="selectOption(this, 4)">plt.write()</div>
            </div>
            
            <button class="quiz-button" onclick="verifyQuiz()">Verifica Risposte</button>
            
            <div class="reward" id="reward"></div>
        </div>
    </div>
    
    <div class="footer">
        <p>Laboratorio di Sistemi e Automazione - Lezione 3: Visualizzazione Dati</p>
        <p>Materiale didattico per il corso di ingegneria | ¬© 2023</p>
    </div>
    
    <script>
        // Mappa delle risposte corrette (TESTO ESATTO)
        const correctAnswersMap = {
            1: 'Matplotlib',
            2: 'plt.scatter()',
            3: 'Il modello di regressione lineare',
            4: 'plt.savefig()'
        };

        // Funzione per gestire la SELEZIONE GRAFICA (non fa calcoli)
        function selectOption(element, questionId) {
            // Trova il contenitore della domanda specifica
            const container = document.getElementById('q' + questionId);
            
            // Rimuovi la selezione dalle altre opzioni in questo contenitore
            const options = container.getElementsByClassName('quiz-option');
            for (let opt of options) {
                opt.classList.remove('selected');
            }
            
            // Aggiungi selezione all'elemento cliccato
            element.classList.add('selected');
        }

        // Funzione per VERIFICARE IL PUNTEGGIO (eseguita solo al click del bottone)
        function verifyQuiz() {
            let score = 0;
            const totalQuestions = 4;
            let missingAnswers = false;

            // Loop su ogni domanda
            for (let i = 1; i <= totalQuestions; i++) {
                const container = document.getElementById('q' + i);
                const selectedOption = container.querySelector('.selected');
                
                if (selectedOption) {
                    // Confronta il testo, rimuovendo spazi extra (.trim())
                    const userText = selectedOption.textContent.trim();
                    const correctText = correctAnswersMap[i];
                    
                    if (userText === correctText) {
                        score++;
                    }
                } else {
                    missingAnswers = true;
                }
            }

            // Logica di visualizzazione risultato
            const reward = document.getElementById('reward');
            reward.style.display = 'block';

            if (missingAnswers) {
                reward.className = 'reward';
                reward.style.background = '#fff3cd';
                reward.style.border = '2px solid #ffc107';
                reward.innerHTML = `<strong>‚ö†Ô∏è Attenzione:</strong> Non hai risposto a tutte le domande. Seleziona una risposta per ogni domanda e riprova.`;
                return;
            }

            if (score === totalQuestions) {
                // TUTTO CORRETTO
                reward.className = 'reward success';
                reward.style.background = '#d5f4e6';
                reward.style.border = '2px solid #27ae60';
                reward.innerHTML = `
                    <h3 style="margin-top:0; color:#27ae60">üéâ Eccellente!</h3>
                    <p>Hai risposto correttamente a <strong>${score} su ${totalQuestions}</strong> domande.</p>
                    <p>Hai completato la lezione con successo.</p>
                    <a href="lezione4.html" class="next-lesson-btn">Vai alla Lezione 4 ‚û°Ô∏è</a>
                `;
            } else {
                // RISPOSTE SBAGLIATE
                reward.className = 'reward';
                reward.style.background = '#fadbd8';
                reward.style.border = '2px solid #e74c3c';
                reward.innerHTML = `
                    <h3 style="margin-top:0; color:#c0392b">Riprova</h3>
                    <p>Hai ottenuto un punteggio di <strong>${score} su ${totalQuestions}</strong>.</p>
                    <p>Rileggi la lezione e prova a correggere le tue risposte.</p>
                `;
            }
            
            // Scorri verso il risultato
            reward.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Smooth scrolling per il menu
        document.querySelectorAll('.nav a').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 20,
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>
</html>
